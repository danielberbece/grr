<div *ngIf="client$ | async as client">
  <div class="header mat-body-1">
    <mat-icon>computer</mat-icon>
    <div class="mat-h1">{{client.knowledgeBase.fqdn}}
      <div class="client-id mat-h3">{{client.clientId}}</div>
    </div>
  </div>
  <div class='info mat-body-1'>
    <table class="section">
      <div class="section-title">General</div>
      <tr>
        <td class="description">Client ID</td>
        <td class="value">{{client.clientId}}</td>
      </tr>
      <tr *ngIf="client.knowledgeBase.fqdn">
        <td class="description">FQDN</td>
        <td class="value">{{client.knowledgeBase.fqdn}}</td>
      </tr>
      <tr *ngIf="client.lastSeenAt">
        <td class="description">Last seen</td>
        <td class="value"><timestamp [date]="client.lastSeenAt"></timestamp></td>
      </tr>
      <tr *ngIf="client.lastClock">
        <td class="description">Last clock</td>
        <td class="value"><timestamp [date]="client.lastClock"></timestamp></td>
      </tr>
      <tr *ngIf="client.lastBootedAt">
        <td class="description">Last boot</td>
        <td class="value"><timestamp [date]="client.lastBootedAt"></timestamp></td>
      </tr>
      <tr>
        <td class="description">Labels</td>
        <td class="value">
          <div *ngFor="let label of client.labels">
            {{label.name}}
          </div>
        </td>
      </tr>
    </table>

    <br>
    <table class="section" *ngIf="client.osInfo">
      <div class="section-title">OS Info</div>
      <tr>
        <td class="description">System</td>
        <td class="value">{{client.osInfo.system}}</td>
      </tr>
      <tr>
        <td class="description">Release</td>
        <td class="value">{{client.osInfo.release}}</td>
      </tr>
      <tr>
        <td class="description">Version</td>
        <td class="value">{{client.osInfo.version}}</td>
      </tr>
      <tr>
        <td class="description">Kernel</td>
        <td class="value">{{client.osInfo.kernel}}</td>
      </tr>
      <tr *ngIf="client.knowledgeBase.osMajorVersion">
        <td class="description">OS major version</td>
        <td class="value">{{client.knowledgeBase.osMajorVersion}}</td>
      </tr>
      <tr *ngIf="client.knowledgeBase.osMinorVersion">
        <td class="description">OS minor version</td>
        <td class="value">{{client.knowledgeBase.osMinorVersion}}</td>
      </tr>
      <tr *ngIf="client.osInfo.installDate">
        <td class="description">Install date</td>
        <td class="value"><timestamp [date]="client.osInfo.installDate"></timestamp></td>
      </tr>
    </table>

    <br>
    <table class="section" *ngIf="client.users.length > 0">
      <div class="section-title">Users</div>
      <ng-template ngFor let-user [ngForOf]="client.users">
      <tr>
        <td class="description">Username</td>
        <td class="value">{{user.username}}</td>
      </tr>
      <tr>
        <td class="description">Full name</td>
        <td class="value">{{user.fullName}}</td>
      </tr>
      <tr *ngIf="user.lastLogon">
        <td class="description">Last Logon</td>
        <td class="value"><timestamp [date]="user.lastLogon"></timestamp></td>
      </tr>
      <tr>
        <td class="description">Home directory</td>
        <td class="value">{{user.homedir}}</td>
      </tr>
      <tr>
        <td class="description">UID</td>
        <td class="value">{{user.uid}}</td>
      </tr>
      <tr>
        <td class="description">GID</td>
        <td class="value">{{user.gid}}</td>
      </tr>
      <tr>
        <td class="description">Shell</td>
        <td class="value">{{user.shell}}</td>
      </tr>
      <br>
      </ng-template>
    </table>

    <br>
    <table class="section">
      <div class="section-title">CPU & Memory</div>
      <tr *ngIf="client.osInfo && client.osInfo.machine">
        <td class="description">CPU Architecture</td>
        <td class="value">{{client.osInfo.machine}}</td>
      </tr>
      <tr>
        <td class="description">Memory size</td>
        <td class="value"><human-readable-size [size]="client.memorySize"></human-readable-size></td>
      </tr>
    </table>

    <br>
    <table class="section" *ngIf="client.networkInterfaces.length > 0">
      <div class="section-title">Network interfaces</div>
      <ng-template ngFor let-interface [ngForOf]="client.networkInterfaces">
      <tr>
        <td class="description">Interface Name</td>
        <td class="value">{{interface.interfaceName}}</td>
      </tr>
      <tr>
        <td class="description">MAC</td>
        <td class="value">{{interface.macAddress}}</td>
      </tr>
      <tr>
        <td class="description">IP Addresses</td>
        <td class="value">
          <div *ngFor="let address of interface.addresses">
            {{address.ipAddress}}
          </div>
        </td>
      </tr>
    </ng-template>
    </table>

    <br>
    <table class="section" *ngIf="client.volumes.length > 0">
      <div class="section-title">Storage volumes</div>
      <ng-template ngFor let-volume [ngForOf]="client.volumes">
        <tr *ngIf="volume.name">
          <td class="description">Volume Name</td>
          <td class="value">{{volume.name}}</td>
        </tr>
        <tr *ngIf="volume.devicePath">
          <td class="description">Storage device path</td>
          <td class="value">{{volume.devicePath}}</td>
        </tr>
        <tr *ngIf="volume.fileSystemType">
          <td class="description">Filesystem Type</td>
          <td class="value">{{volume.fileSystemType}}</td>
        </tr>
        <tr *ngIf="volume.totalSize">
          <td class="description">Total Size</td>
          <td class="value"><human-readable-size [size]="volume.totalSize"></human-readable-size></td>
        </tr>
        <tr *ngIf="volume.freeSpace">
          <td class="description">Free Space</td>
          <td class="value"><human-readable-size [size]="volume.freeSpace"></human-readable-size></td>
        </tr>
        <tr *ngIf="volume.bytesPerSector">
          <td class="description">Sector Size</td>
          <td class="value">{{volume.bytesPerSector}} B</td>
        </tr>
        <tr *ngIf="volume.creationTime">
          <td class="description">Creation time</td>
          <td class="value"><timestamp [date]="volume.creationTime"></timestamp></td>
        </tr>
        <br>
      </ng-template>
    </table>

    <br>
    <table class="section" *ngIf="client.agentInfo">
      <div class="section-title">Agent info</div>
      <tr>
        <td class="description">Client name</td>
        <td class="value">{{client.agentInfo.clientName}}</td>
      </tr>
      <tr>
        <td class="description">Client version</td>
        <td class="value">{{client.agentInfo.clientVersion}}</td>
      </tr>
      <tr>
        <td class="description">Build time</td>
        <td class="value">{{client.agentInfo.buildTime}}</td>
      </tr>
      <tr>
        <td class="description">Client binary name</td>
        <td class="value">{{client.agentInfo.clientBinaryName}}</td>
      </tr>
      <tr>
        <td class="description">Client description</td>
        <td class="value">{{client.agentInfo.clientDescription}}</td>
      </tr>
    </table>
  </div>
</div>
